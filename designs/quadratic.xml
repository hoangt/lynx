<design name="quadratic">
  
  <module type="mult_x" name="multx_inst">
    
	<parameter name="WIDTH" value="16"/>
	
	<port direction="input" width="16" name="i_x"/>
	<port direction="input" width="1" name="i_valid_in"/>
	<port direction="output" width="1" name="i_ready_out"/>
	
	<port direction="output" width="16" name="o_y"/>
	<port direction="output" width="1" name="o_valid_out"/>
	<port direction="input" width="1" name="o_ready_in"/>
	
  </module>
  
  <module type="mult_a" name="multa_inst">
    
	<parameter name="WIDTH" value="16"/>
	
	<port direction="input" width="16" name="i_x"/>
	<port direction="input" width="1" name="i_valid_in"/>
	<port direction="output" width="1" name="i_ready_out"/>
	
	<port direction="output" width="16" name="o_y"/>
	<port direction="output" width="1" name="o_valid_out"/>
	<port direction="input" width="1" name="o_ready_in"/>
	
  </module>
  <module type="add_c" name="addc_inst">
    
	<parameter name="WIDTH" value="16"/>
	
	<port direction="input" width="16" name="i_x"/>
	<port direction="input" width="1" name="i_valid_in"/>
	<port direction="output" width="1" name="i_ready_out"/>
	
	<port direction="output" width="16" name="o_y"/>
	<port direction="output" width="1" name="o_valid_out"/>
	<port direction="input" width="1" name="o_ready_in"/>
	
  </module>
  
  <!-- Must parse modules before connections and interfaces, can remove that restriction later -->
  
  <!-- Connections -->
  
  <connection start="multx_inst.o_y" end="multa_inst.i_x"/>
  <connection start="multx_inst.o_valid_out" end="multa_inst.i_valid_in"/>
  <connection start="multa_inst.i_ready_out" end="multx_inst.o_ready_in"/>
  
  <connection start="multa_inst.o_y" end="addc_inst.i_x"/>
  <connection start="multa_inst.o_valid_out" end="addc_inst.i_valid_in"/>
  <connection start="addc_inst.i_ready_out" end="multa_inst.o_ready_in"/>
  
  <!-- top-level wires are connections from top-level to submodules -->
  
  <wire top="x_in" sub="multx_inst.i_x"/>
  <wire top="x_valid_in" sub="multx_inst.i_valid_in"/>
  <wire sub="multx_inst.i_ready_out" top="x_ready_out"/>
  
  <wire sub="addc_inst.o_y" top="y_out"/>
  <wire sub="addc_inst.o_valid_out" top="y_valid_out"/>
  <wire top="y_ready_in" sub="addc_inst.o_ready_in"/>
  
  
  <!-- interfaces -->
  
  <port direction="input" width="16" name="x_in"/>
  <port direction="input" width="1" name="x_valid_in"/>
  <port direction="output" width="1" name="x_ready_out"/>
  
  <port direction="output" width="16" name="y_out"/>
  <port direction="output" width="1" name="y_valid_out"/>
  <port direction="input" width="1" name="y_ready_in"/>
  
  <!-- At some point could make all names optional, and can derive names based on types/directions automatically -->
  
</design>
